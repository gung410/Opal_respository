<div class="content-management-container">
  <div class="content-management detail-page">
    <div class="toolbar"
         stickyElement
         #assignmentDetailStickyToolbarElement="stickyElement">
      <div class="toolbar__left-container">
        <div class="toolbar__left-group">
          <button class="toolbar__left-group__back-button"
                  kendoButton
                  [icon]="'arrow-chevron-left'"
                  [look]="'flat'"
                  (click)="onClickBack()">
            {{ 'Back' | translator }}
          </button>
          <div class="toolbar__left-group__title-group"
               kendoTooltip
               [tooltipClass]="'info-tooltip'">
            <breadcrumb *ngIf="breadCrumbItems.length > 0"
                        [items]="breadCrumbItems"></breadcrumb>
            <span class="toolbar__left-group__title-group__title">
              <span [title]="title"> {{ title }} </span>
            </span>
          </div>
        </div>
      </div>
      <div class="toolbar__center-container">
      </div>
      <div class="toolbar__right-container">
      </div>
    </div>
    <kendo-tabstrip class="opal-tabstrip top-merge"
                    [animate]="false"
                    (tabSelect)="onTabSelected($event)"
                    stickyTabHeaderElement
                    #assignmentDetailStickyTabHeaderElement="stickyTabHeaderElement"
                    [stickyDependElement]="assignmentDetailStickyToolbarElement.element">
      <kendo-tabstrip-tab [selected]="selectedTab === LMMTabConfiguration.AssignmentInfoTab">
        <ng-template kendoTabTitle="">
          {{ 'Information' | translator }}
        </ng-template>
        <ng-template kendoTabContent="">
          <assignment-form-editor class="assignment-form-editor"
                                  *ngIf="assignmentVm"
                                  #assignmentFormEditor
                                  [assignmentVm]="assignmentVm"
                                  [mode]="AssignmentMode.View"></assignment-form-editor>
        </ng-template>
      </kendo-tabstrip-tab>
      <kendo-tabstrip-tab *ngIf="canViewLearnerAssignmentTrack()"
                          [selected]="selectedTab === LMMTabConfiguration.AssigneesTab">
        <ng-template kendoTabTitle="">
          {{ 'Assignees' | translator }}
        </ng-template>
        <ng-template kendoTabContent="">
          <div class="grid-container">
            <div class="management-toolbar">
              <div class="management-toolbar__left-container">
                <div class="search-field">
                  <search-input [(ngModel)]="searchText"
                                [placeholder]="'Search for learner' | translator"
                                (search)="onSubmitSearch()"></search-input>
                </div>
                <data-filter [component]="filterPopupContent"
                             [applyFn]="onApplyFilter.bind(this)"></data-filter>
              </div>
              <div class="management-toolbar__right-container">
                <button *ngIf="canSetupPeerAssessment()"
                        (click)="onClickSetupPeerAssessment()"
                        [primary]="true"
                        kendoButton>{{ 'Setup Peer Assessment' | translator }}</button>
                <button [primary]="true"
                        *ngIf="canAssignAssignment()"
                        (click)="onClickAsign()"
                        kendoButton>{{ 'Assign' | translator }}</button>
                <opal-report-dynamic class="exporting"
                                     [paramsReportDynamic]="paramsAssignemtReportDynamic"></opal-report-dynamic>
              </div>
            </div>
            <list-participant-assignment-track-grid *ngIf="assignmentVm"
                                                    [filter]="filter"
                                                    [courseId]="detailPageInput.data.courseId"
                                                    [classRunId]="detailPageInput.data.classRunId"
                                                    [assignmentId]="detailPageInput.data.assignmentId"
                                                    (viewAssignmentTrack)="onViewAssignmentTrack($event)"
                                                    [stickyDependElement]="assignmentDetailStickyTabHeaderElement.headerElement">
            </list-participant-assignment-track-grid>
          </div>
        </ng-template>
      </kendo-tabstrip-tab>
    </kendo-tabstrip>
  </div>
</div>
