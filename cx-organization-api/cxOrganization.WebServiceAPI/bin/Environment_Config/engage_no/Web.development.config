<?xml version="1.0"?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">

  <!-- !!!! ======================================================================================== !!!! -->
  <!-- !!!! Remember to change the build for this file: File must be marked Content + Copy to Output !!!! -->
  <!-- !!!! ======================================================================================== !!!! -->
  <appSettings>
    <add key="serviceUsername" value="developmentuser" xdt:Transform="Replace"  xdt:Locator="Match(key)"/>
    <add key="servicePassword" value="developmentpassword" xdt:Transform="Replace"  xdt:Locator="Match(key)"/>
    <add key="OwnerId" value="9" xdt:Transform="Replace"  xdt:Locator="Match(key)"/>
    <add key="SiteId" value="5" xdt:Transform="Replace"  xdt:Locator="Match(key)"/>
    <add key="HDID" value="16849" xdt:Transform="Replace"  xdt:Locator="Match(key)"/>
    <add key="DisableGetDynamicProperties" value="True" xdt:Transform="Replace"  xdt:Locator="Match(key)"/>
    <add key="DisableCheckAccessRule" value="True" xdt:Transform="Replace"  xdt:Locator="Match(key)"/>
    <add key="MasterRedisConfiguration" value="cct-sql02:6383,connectRetry=5,connectTimeout=10000,keepAlive=30,abortConnect=false,allowAdmin=true" xdt:Transform="Replace"  xdt:Locator="Match(key)"/>
    <add key="SlaveRedisConfiguration" value="cct-sql02:6383,connectRetry=5,connectTimeout=10000,keepAlive=30,abortConnect=false,allowAdmin=true" xdt:Transform="Replace"  xdt:Locator="Match(key)"/>
    <add key="UserTypeEmployee" value="75" xdt:Transform="Replace"  xdt:Locator="Match(key)"/>
    <add key="CurrentUserId" value="883174" xdt:Transform="Replace"  xdt:Locator="Match(key)"/>
    <add key="EventAPIBaseUrl" value="http://development-engage-no-api-event.conexus.net/" xdt:Transform="Replace"  xdt:Locator="Match(key)" />
    <add key="EventAPIAuthorization" value="Basic ZGV2ZWxvcG1lbnR1c2VyOmRldmVsb3BtZW50cGFzc3dvcmQ=" xdt:Transform="Replace"  xdt:Locator="Match(key)" />
    <add key="UseSeparateQAndRDatabase" value="false" xdt:Transform="Replace"  xdt:Locator="Match(key)"/>
  </appSettings>

  <connectionStrings>
    <add name="ErrorLogging" connectionString="Data Source=cct-sql02;Initial Catalog=elmah-at6q;Persist Security Info=True;User ID=ATAdmin; Password=morty" providerName="System.Data.SqlClient" xdt:Transform="Replace"  xdt:Locator="Match(name)"/>
    <add name="AT6QDBTemplate" connectionString="Data Source=cct-sql02;Initial Catalog=development-engage-no-at6q; User ID=atadmin;Password=morty" providerName="System.Data.SqlClient" xdt:Transform="Replace"  xdt:Locator="Match(name)"/>
  </connectionStrings>
  
  <system.web>
    <compilation xdt:Transform="RemoveAttributes(debug)" />
  </system.web>
  
  <elmah>
    <errorLog xdt:Transform="Remove" />
    <errorLog type=
    "Elmah.SqlErrorLog, Elmah" connectionStringName="ErrorLogging" applicationName="development-vokal-no-api-organization" xdt:Transform="InsertIfMissing" />
  </elmah>

  <log4net xdt:Transform="Remove" />
  <log4net xdt:Transform="InsertIfMissing">
    <root>
      <level value="INFO" />
      <appender-ref ref="ElasticSearchAppender" />
    </root>
    <appender name="UnitOfWorkRollingFileAppender" type="log4stash.ElasticSearchAppender, log4stash">
      <Server>cct-logging-mgmt.westeurope.cloudapp.azure.com</Server>
      <Port>9200</Port>
      <IndexName>development-unitofwork-%{+yyyy-MM-dd}</IndexName>
      <IndexType>LogEvent</IndexType>
      <Bulksize>100</Bulksize>
      <BulkIdleTimeout>5000</BulkIdleTimeout>
      <IndexAsync>False</IndexAsync>

      <FixedFields>Partial</FixedFields>
      <ElasticFilters>
        <Add>
          <Key>sitename</Key>
          <Value>development-engage-no-api-organization</Value>
        </Add>
      </ElasticFilters>

      <filter type="log4net.Filter.LevelRangeFilter">
        <levelMin value="debug" />
        <levelMax value="FATAL" />
      </filter>
    </appender>

    <logger name="UnitOfWorkLogger">
      <level value="ALL" />
      <appender-ref ref="UnitOfWorkRollingFileAppender" />
    </logger>
  </log4net>
</configuration>