function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{O7HD:function(e,t,n){"use strict";n.r(t),n.d(t,"DepartmentHierarchicalModule",(function(){return X}));var r=n("tyNb"),a=n("Z2gp"),i=n("1kSV"),o=n("PCNd"),c=n("1fqm"),s=n("5Khg"),l=n("hI+g"),d=n("NngO"),p=n("P1U7"),m=n("JHbO"),u=n("LvDl"),h=n("9G0y"),f={elements:[{type:"dropdown",name:"jsonDynamicAttributes.typeOfOrganizationUnits",title:"Type of School / Organisation",isRequired:!0,requiredErrorText:"Please select type of school / organisation.",choicesByUrl:{url:"{learningCatalogApi_catalogentries_explorer_url}/OU-TYPES",titleName:"displayText",valueName:"id"}},{type:"text",name:"name",title:"Organisation Unit Name",isRequired:!0,requiredErrorText:"Please fill in organisation unit name.",maxLength:100},{type:"text",name:"organizationNumber",title:"School Code",maxLength:4},{type:"text",name:"identity.extId",title:"Organisation Code",maxLength:8},{type:"text",name:"jsonDynamicAttributes.clusterSuperintendent",title:"Cluster Superintendent",visibleIf:"{isClusterDepartment} == true"},{type:"text",name:"jsonDynamicAttributes.zoneDirector",title:"Zonal Director",visibleIf:"{isZoneDepartment} == true"},{type:"cxtagbox",name:"levels",storeWholeObject:!0,keyName:"identity.id",title:"Level of education",choicesByUrl:{url:s.a.api.organization+"/departmenttypes?archetypeEnums=6&includeLocalizedData=true",titleName:"localizedData.0.fields.0.localizedText"},visibleIf:"{isSchoolDepartment} == true",choicesEnableIf:"{isSchoolDepartment} == true"},{type:"text",name:"address",title:"Address information",maxLength:500},{type:"checkbox",name:"jsonDynamicAttributes.showInSignUpForm",titleLocation:"hidden",choices:[{value:!0,text:"Show in sign up form"}],visibleIf:"{isBranchDepartment} == true or {isSchoolDepartment} == true"}]},y=n("O5r8"),g=n("fXoL"),v=n("ofXK"),D=n("sYmb");function b(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",6),g["\u0275\u0275elementStart"](1,"span"),g["\u0275\u0275text"](2),g["\u0275\u0275pipe"](3,"uppercase"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"]().$implicit;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](g["\u0275\u0275pipeBind1"](3,1,n.name))}}function x(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275elementStart"](1,"cx-checkbox",8),g["\u0275\u0275listener"]("selectedChange",(function(e){return g["\u0275\u0275restoreView"](n),t.$implicit.isSelected=e})),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementContainerEnd"]()}if(2&e){var r=t.$implicit;g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("selected",r.isSelected),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",r.value," ")}}function _(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",7),g["\u0275\u0275template"](1,x,3,2,"ng-container",3),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"]().$implicit;g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",n.options)}}function S(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275template"](1,b,4,3,"div",4),g["\u0275\u0275template"](2,_,2,1,"div",5),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",n.name),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",n.options)}}function I(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",2),g["\u0275\u0275template"](1,S,3,2,"div",3),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngForOf",n.departmentFilterOptions)}}var C,O=((C=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).cancel=new g.EventEmitter,r.done=new g.EventEmitter,r}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"onCancel",value:function(){this.cancel.emit()}},{key:"onDone",value:function(){this.done.emit(this.departmentFilterOptions)}}]),n}(l.d)).\u0275fac=function(e){return new(e||C)(g["\u0275\u0275directiveInject"](g.ChangeDetectorRef))},C.\u0275cmp=g["\u0275\u0275defineComponent"]({type:C,selectors:[["filter-department"]],inputs:{departmentFilterOptions:"departmentFilterOptions"},outputs:{cancel:"cancel",done:"done"},features:[g["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:10,consts:[[1,"filter-department",3,"doneButtonText","cancelButtonText","done","cancel"],["class","filter-department__content",4,"ngIf"],[1,"filter-department__content"],[4,"ngFor","ngForOf"],["class","filter-department__header",4,"ngIf"],["class","filter-department__items row m-0",4,"ngIf"],[1,"filter-department__header"],[1,"filter-department__items","row","m-0"],[1,"col-12","col-sm-6","col-lg-4","p-0",3,"selected","selectedChange"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"cx-dialog-template",0),g["\u0275\u0275listener"]("done",(function(){return t.onDone()}))("cancel",(function(){return t.onCancel()})),g["\u0275\u0275pipe"](1,"translate"),g["\u0275\u0275pipe"](2,"translate"),g["\u0275\u0275elementStart"](3,"modal-header"),g["\u0275\u0275elementStart"](4,"h5"),g["\u0275\u0275text"](5),g["\u0275\u0275pipe"](6,"translate"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](7,"content"),g["\u0275\u0275template"](8,I,2,1,"div",1),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275property"]("doneButtonText",g["\u0275\u0275pipeBind1"](1,4,"Common.Label.Apply"))("cancelButtonText",g["\u0275\u0275pipeBind1"](2,6,"Common.Button.Cancel")),g["\u0275\u0275advance"](5),g["\u0275\u0275textInterpolate"](g["\u0275\u0275pipeBind1"](6,8,"Department_Page.Filter_Section.Title")),g["\u0275\u0275advance"](3),g["\u0275\u0275property"]("ngIf",t.departmentFilterOptions))},directives:[a.i,v.n,v.m,a.d],pipes:[D.c,v.y],styles:[".filter-department__header[_ngcontent-%COMP%]{margin:20px 0 10px 4px;font-weight:500}.filter-department__items[_ngcontent-%COMP%]{-moz-columns:3;column-count:3}"]}),C),E=n("APso"),w=n("jFaw"),A=n("uKvJ");function T(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"span",4),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",n.resultMatch," ")}}function j(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"ul",5),g["\u0275\u0275elementStart"](1,"li",6),g["\u0275\u0275elementStart"](2,"div",7),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.$implicit;return g["\u0275\u0275nextContext"]().onClickItemResult(e)})),g["\u0275\u0275text"](3),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"div",8),g["\u0275\u0275text"](5),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate1"](" ",r.departmentName," "),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",a.departmentPathMap[r.identity.id]," ")}}function k(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div"),g["\u0275\u0275elementStart"](1,"span",9),g["\u0275\u0275text"](2),g["\u0275\u0275pipe"](3,"translate"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",g["\u0275\u0275pipeBind1"](3,1,n.isSearchAction?"Department_Page.Department_Search.No_Result_Message":"Department_Page.Department_Filter.No_Result_Message")," ")}}var F,z=((F=function(){function e(t){_classCallCheck(this,e),this.translateService=t,this.isSearchAction=!0,this.departmentPathMap={},this.cancel=new g.EventEmitter,this.clickItemResult=new g.EventEmitter}return _createClass(e,[{key:"ngOnInit",value:function(){this.resultMatch=this.translateService.instant(this.isSearchAction?"Department_Page.Department_Search.ResultMatch":"Department_Page.Department_Filter.ResultMatch",{resultLength:this.searchDepartmentResult.length})}},{key:"onCancel",value:function(){this.cancel.emit()}},{key:"onClickItemResult",value:function(e){this.clickItemResult.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||F)(g["\u0275\u0275directiveInject"](D.d))},F.\u0275cmp=g["\u0275\u0275defineComponent"]({type:F,selectors:[["search-department-hierarchical"]],decls:9,vars:5,consts:[[3,"showFooterActionButtons","cancel"],["class","content-search__result-match",4,"ngIf"],["class","list-group list-group-flush",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"content-search__result-match"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"content-search__result--name","text-primary",3,"click"],[1,"text-primary"],[1,"content-search__no-result","text-primary"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"cx-dialog-template",0),g["\u0275\u0275listener"]("cancel",(function(){return t.onCancel()})),g["\u0275\u0275elementStart"](1,"modal-header"),g["\u0275\u0275elementStart"](2,"h4"),g["\u0275\u0275text"](3),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"content"),g["\u0275\u0275template"](5,T,2,1,"span",1),g["\u0275\u0275elementStart"](6,"div"),g["\u0275\u0275template"](7,j,6,2,"ul",2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](8,k,4,3,"div",3),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275property"]("showFooterActionButtons",!1),g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate"](t.dialogHeaderText),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",t.searchDepartmentResult.length>0),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngForOf",t.searchDepartmentResult),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",t.isNoSearchResult))},directives:[a.i,v.n,v.m],pipes:[D.c],styles:[""]}),F),L=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"openAddDepartmentSurveyJSForm",value:function(e,t){var n=E.a.filter((function(t){return t.parentIdIdentity===(e.organizationUnitType?e.organizationUnitType[0].identity.extId:e.organizationUnitType)}));if(n&&0===n.length)return null;var r=t.filter((function(e){return e.identity.extId===n[0].childrenIdIdentity}));if(r&&0===r.length)return null;var i=r&&r.length>0?r.map((function(e){return e.identity.extId})):"",o=i.includes(E.c.School),c=i.includes(E.c.Branch_Zone),s=i.includes(E.c.Cluster),l=i.includes(E.c.Branch_Zone);return{options:{showModalHeader:!0,fixedButtonsFooter:!0,modalHeaderText:"Add new Organisation Unit",cancelName:"Cancel",submitName:"Ok",variables:[new a.B({name:m.a.currentObject_isExternallyMastered,value:!1}),new a.B({name:m.a.formDisplayMode,value:"add"}),new a.B({name:m.a.isSchoolDepartment,value:o}),new a.B({name:m.a.isClusterDepartment,value:s}),new a.B({name:m.a.isZoneDepartment,value:c}),new a.B({name:m.a.isBranchDepartment,value:l})]},dataJson:{parentDepartmentId:e.identity.id,"identity.ownerId":e.identity.ownerId,"identity.customerId":e.identity.customerId,"identity.archetype":e.identity.archetype,organizationalUnitTypes:r,"entityStatus.externallyMastered":!1}}}}]),e}(),R=n("jGGy"),P=n("BJ9+"),M=n("f2UD"),U=n("qsFD");function N(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",15),g["\u0275\u0275elementStart"](1,"span",16),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"i",17),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=g["\u0275\u0275nextContext"](),t=e.item,r=e.groupConst;return g["\u0275\u0275nextContext"](3).onCloseTag(t,r)})),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var r=g["\u0275\u0275nextContext"]().item;g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](r.value)}}function B(e,t){1&e&&g["\u0275\u0275template"](0,N,4,1,"div",14),2&e&&g["\u0275\u0275property"]("ngIf",t.item.isSelected)}function H(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"div",11),g["\u0275\u0275elementStart"](1,"cx-tag-group",12),g["\u0275\u0275listener"]("clearAll",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).onClearAllFilter()}))("closeTagGroup",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).onCloseTagGroup(e)})),g["\u0275\u0275template"](2,B,1,1,"ng-template",null,13,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var r=g["\u0275\u0275reference"](3),a=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("backgroundColor","#f1f1f1")("tagGroup",a.departmentTagData)("tagGroupField","groupConstant")("tagProperty","options")("tagTemplate",r)}}function G(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",9),g["\u0275\u0275template"](1,H,4,5,"div",10),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"]();g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",n.departmentTagData&&n.departmentTagData.length>0)}}function V(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"span",22),g["\u0275\u0275listener"]("click",(function(){g["\u0275\u0275restoreView"](n);var e=t.item;return g["\u0275\u0275nextContext"](2).onUpdateDepartment(e)})),g["\u0275\u0275text"](1),g["\u0275\u0275elementEnd"]()}if(2&e){var r=t.item;g["\u0275\u0275propertyInterpolate"]("title",r.organizationalUnitTypes?r.organizationalUnitTypes[0].localizedData[0].fields[0].localizedText:""),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"]("",r.departmentName," ")}}function Q(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",23),g["\u0275\u0275elementStart"](1,"div",24),g["\u0275\u0275text"](2),g["\u0275\u0275pipe"](3,"translate"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](4,"div",24),g["\u0275\u0275text"](5),g["\u0275\u0275pipe"](6,"translate"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",g["\u0275\u0275pipeBind1"](3,2,"Department_Page.Department_List.Level_Of_Education")," "),g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate1"](" ",g["\u0275\u0275pipeBind1"](6,4,"Department_Page.Department_List.Type_Of_School_Organisation")," "))}function J(e,t){if(1&e&&(g["\u0275\u0275elementContainerStart"](0),g["\u0275\u0275text"](1),g["\u0275\u0275elementContainerEnd"]()),2&e){var n=g["\u0275\u0275nextContext"]().item,r=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",r.displayText(n)," ")}}function q(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"div",23),g["\u0275\u0275elementStart"](1,"div",25),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](3,"div",25),g["\u0275\u0275template"](4,J,2,1,"ng-container",26),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=t.item,r=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate1"](" ",r.levelOfEducationMap[n.identity.id]," "),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",null==n||null==n.jsonDynamicAttributes?null:n.jsonDynamicAttributes.typeOfOrganizationUnits)}}function Z(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"cx-extensive-tree",18),g["\u0275\u0275listener"]("addItem",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().onOpenAddDepartmentForm(e)}))("editItem",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().onUpdateDepartment(e)}))("loadChildren",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().loadChildren(e)}))("deleteItem",(function(e){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().onDeleteItem(e)})),g["\u0275\u0275template"](1,V,2,2,"ng-template",null,19,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275template"](3,Q,7,6,"ng-template",null,20,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275template"](5,q,5,2,"ng-template",null,21,g["\u0275\u0275templateRefExtractor"]),g["\u0275\u0275elementEnd"]()}if(2&e){var r=g["\u0275\u0275reference"](2),a=g["\u0275\u0275reference"](4),i=g["\u0275\u0275reference"](6),o=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("buttonCondition",o.buttonCondition)("countChildrenFieldRoute","childrenCount")("displayFieldRoute","departmentName")("extensiveTreeHeader","Organisation Unit")("flatObjectsArray",o.flatDepartmentsArray)("havingExtensiveArea",o.havingExtensiveArea)("headerExtensiveTemplate",a)("idFieldRoute","identity.id")("itemExtensiveTemplate",i)("nameDepartmentTemplate",r)("parentIdFieldRoute","parentDepartmentId")("text",o.text)("isDetectExpandTree",o.isDetectExpandTree)("currentDepartmentId",o.currentDepartmentId)}}function K(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"span",27),g["\u0275\u0275text"](1),g["\u0275\u0275pipe"](2,"translate"),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",g["\u0275\u0275pipeBind1"](2,1,"Department_Page.Department_List.Department_Is_Empty")," "))}var Y,$,W=(($=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,o,c,l,d,p,m,u){var h;return _classCallCheck(this,n),(h=t.call(this,e)).departmentHierarchicalService=r,h.authService=i,h.cxGlobalLoaderService=o,h.translateAdapterService=c,h.formModal=l,h.toastr=d,h.globalKeySearchStoreService=p,h.ngbModal=m,h.translateService=u,h.flatDepartmentsArray=[],h.departmentQueryObject=new A.c({}),h.text=new a.H,h.havingExtensiveArea=!0,h.isLoadingDepartment=!1,h.levelOfEducationMap={},h.isNoDepartment=!1,h.departmentPathMap={},h.searchDepartmentResult=[],h.departmentRouteMap={},h.typesOfOrganisation=[],h.departmentForm=f,h.departmentSurveyJSHelper=new L,h.handleErrorWhenAddDepartment=function(e){h.cxGlobalLoaderService.hideLoader(),h.toastr.error(e&&e.error&&e.error.errorCode===s.b.VALIDATION_DEPARTMENT_EXTID_EXISTS?"Failed to add Organization Unit, duplicated Organisation Code":"Failed to add Organization Unit")},h}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.text.header="Organisation",this.initButtonCondition(),this.cxGlobalLoaderService.showLoader(),this.subscription.add(this.authService.userData().subscribe((function(t){t&&(e.currentUser=t,e.currentLanguageCode=localStorage.getItem("language-code"),e.currentDepartmentId=t.departmentId,e.selectedDepartmentId=t.departmentId,e.initFilterObject(),e.getDepartments(h.b.getDefaultRootDepartment(e.currentUser)),e.getEducationLevels(),e.getDepartmentTypeList(),e.subscription.add(e.departmentHierarchicalService.getTypeOfOrganisation().subscribe((function(t){t.forEach((function(t){e.typesOfOrganisation[t.id]=t}))}))))}))),this.subscription.add(this.globalKeySearchStoreService.get().subscribe((function(t){t&&t.isSearch&&t.searchKey&&e.onSearchDepartment(t.searchKey)})))}},{key:"displayText",value:function(e){if(!e||!e.jsonDynamicAttributes||!e.jsonDynamicAttributes.typeOfOrganizationUnits)return"";var t=this.typesOfOrganisation[e.jsonDynamicAttributes.typeOfOrganizationUnits];return t?t.displayText:""}},{key:"onSearchDepartment",value:function(e){var t=this;this.cxGlobalLoaderService.showLoader(),this.departmentQueryObject.searchText=e,this.departmentQueryObject.maxChildrenLevel=void 0,this.departmentHierarchicalService.getHierarchy(h.b.getDefaultRootDepartment(this.currentUser),this.departmentQueryObject).subscribe((function(n){t.flatDepartmentsArray=u.uniqBy(t.flatDepartmentsArray.concat(n),"identity.id"),t.searchDepartmentResult=h.b.searchDepartments(n,e),t.searchDepartmentResult.map((function(e){t.departmentPathMap[e.identity.id]=t.getPathOfDepartment(n,e);var r={};t.getRouteOfDepartment(n,e,r),t.departmentRouteMap[e.identity.id]=r})),t.openDialog(t.searchDepartmentResult),t.cxGlobalLoaderService.hideLoader()}),(function(){t.toastr.error("There is something wrong, Please try again."),t.cxGlobalLoaderService.hideLoader()}))}},{key:"onOpenAddDepartmentForm",value:function(e){var t=this;this.subscription.add(this.departmentHierarchicalService.getDepartmentInfo(e.parentObject).subscribe((function(e){e&&t.initializeNewDepartment(e)})))}},{key:"initializeNewDepartment",value:function(e){var t=this;if(!this.formModal.hasOpenModals()){var n=this.departmentSurveyJSHelper.openAddDepartmentSurveyJSForm(e,this.departmentTypeList);if(null===n)return void this.toastr.error("Cannot initialize new department belong to current department selected");var r=this.formModal.openSurveyJsForm(this.departmentForm,n.dataJson,[],n.options,{size:"lg",backdrop:"static"}),a=this.formModal.submit.subscribe((function(e){if(e){var n=c.a.mapSurveyJSResultToObject(e),a=new w.a(n);a&&a.jsonDynamicAttributes&&a.jsonDynamicAttributes.showInSignUpForm&&a.jsonDynamicAttributes.showInSignUpForm instanceof Array&&(a.jsonDynamicAttributes.showInSignUpForm=a.jsonDynamicAttributes.showInSignUpForm[0]),a.entityStatus=Object.assign(Object.assign({},a.entityStatus),{lastUpdated:new Date,lastUpdatedBy:t.currentUser.identity.id,statusId:"Active",statusReasonId:"Unknown"}),t.onAddDepartment(a),r.close()}}),(function(e){t.toastr.error(e.error.Message,"An error occurred when updating department.")}));r.result.finally((function(){a.unsubscribe()}))}}},{key:"onAddDepartment",value:function(e){var t=this;this.cxGlobalLoaderService.showLoader(),this.subscription.add(this.departmentHierarchicalService.addNewOrganizationUnit(e).subscribe((function(e){if(e){e.departmentName=e.name;var n=t.flatDepartmentsArray.filter((function(t){return t.parentDepartmentId===e.parentDepartmentId}));if(n&&n.length>0){var r=u.cloneDeep(t.flatDepartmentsArray),a=r.findIndex((function(t){return t.identity.id===e.parentDepartmentId}));r[a].childrenCount+=1,r.push(e),t.flatDepartmentsArray=r,t.cxGlobalLoaderService.hideLoader()}void 0===e.childrenCount&&(e.childrenCount=0,e.userCount=0),t.updateLevelOfEducationMap(e),t.changeDetectorRef.detectChanges(),t.extensiveTreeComponent.executeAddItem(e,0),t.toastr.success("Organisation unit ".concat(e.departmentName," has been added"))}}),this.handleErrorWhenAddDepartment))}},{key:"onUpdateDepartment",value:function(e){var t=this;e&&this.subscription.add(this.departmentHierarchicalService.getDepartmentInfo(e).subscribe((function(e){e&&(t.currentSelectedDepartment=e,t.openUpdateDepartmentForm())})))}},{key:"onDeleteItem",value:function(e){var t=this,n=this.ngbModal.open(a.h,{size:"lg",centered:!0}),r=n.componentInstance;r.cancelButtonText=this.translateService.instant("Common.Button.Cancel"),r.confirmButtonText=this.translateService.instant("Common.Button.Confirm"),r.header=this.translateService.instant("Common.Label.ConfirmationDialog"),r.content=this.translateService.instant("Department_Page.Department_Delete.Deactivate",{departmentName:e.object.departmentName}),r.confirm.subscribe((function(){n.close(),t.departmentHierarchicalService.deleteHierarchy(e).subscribe((function(){var n=u.cloneDeep(t.flatDepartmentsArray),r=n.findIndex((function(t){return t.identity.id===e.object.parentDepartmentId}));n[r].childrenCount-=1,u.remove(n,(function(t){return t.identity.id===e.object.identity.id})),t.flatDepartmentsArray=n,t.changeDetectorRef.detectChanges(),t.toastr.success(t.translateService.instant("Department_Page.Department_Delete.Successfully",{departmentName:e.object.departmentName}))}),(function(e){t.toastr.error(t.translateService.instant("Department_Page.Department_Delete.Error"))}))})),r.cancel.subscribe((function(){n.close()}))}},{key:"openUpdateDepartmentForm",value:function(){var e=this,t=this.checkDepartmentType(this.currentSelectedDepartment);if(!this.formModal.hasOpenModals()){var n=[new a.B({name:m.a.currentObject_isExternallyMastered,value:this.currentSelectedDepartment.entityStatus.externallyMastered}),new a.B({name:m.a.formDisplayMode,value:"edit"}),new a.B({name:m.a.isClusterDepartment,value:t.isClusterDepartment}),new a.B({name:m.a.isZoneDepartment,value:t.isZoneDepartment}),new a.B({name:m.a.isSchoolDepartment,value:t.isSchoolDepartment}),new a.B({name:m.a.isBranchDepartment,value:t.isBranchDepartment})],r=this.formModal.openSurveyJsForm(this.departmentForm,{organizationalUnitTypes:this.currentSelectedDepartment.organizationalUnitTypes,"jsonDynamicAttributes.typeOfOrganizationUnits":this.currentSelectedDepartment.jsonDynamicAttributes&&this.currentSelectedDepartment.jsonDynamicAttributes.typeOfOrganizationUnits?this.currentSelectedDepartment.jsonDynamicAttributes.typeOfOrganizationUnits:"",name:this.currentSelectedDepartment.name,organizationNumber:this.currentSelectedDepartment.organizationNumber,"identity.extId":this.currentSelectedDepartment.identity.extId,"jsonDynamicAttributes.clusterSuperintendent":this.currentSelectedDepartment.jsonDynamicAttributes&&this.currentSelectedDepartment.jsonDynamicAttributes.clusterSuperintendent?this.currentSelectedDepartment.jsonDynamicAttributes.clusterSuperintendent:"","jsonDynamicAttributes.zoneDirector":this.currentSelectedDepartment.jsonDynamicAttributes&&this.currentSelectedDepartment.jsonDynamicAttributes.zoneDirector?this.currentSelectedDepartment.jsonDynamicAttributes.zoneDirector:"",levels:this.currentSelectedDepartment.levels?this.currentSelectedDepartment.levels:[],"jsonDynamicAttributes.showInSignUpForm":this.currentSelectedDepartment.jsonDynamicAttributes&&this.currentSelectedDepartment.jsonDynamicAttributes.showInSignUpForm,"entityStatus.externallyMastered":this.currentSelectedDepartment.entityStatus.externallyMastered,address:this.currentSelectedDepartment.address},[],{showModalHeader:!0,fixedButtonsFooter:!0,modalHeaderText:"Edit Organisation Unit",cancelName:"Cancel",submitName:"Ok",variables:n},{size:"lg",backdrop:"static"}),i=this.formModal.submit.subscribe((function(t){if(t){var n=c.a.mapSurveyJSResultToObject(t);e.updateDepartment(n)}r.close()}),(function(t){e.toastr.error(t.error.Message,"An error occurred when updating department.")}));r.result.finally((function(){i.unsubscribe()}))}}},{key:"updateDepartment",value:function(e){var t=this,n=this.buildDepartmentDtoFromSubmittedForm(e);this.cxGlobalLoaderService.showLoader(),this.subscription.add(this.departmentHierarchicalService.updateOrganizationUnit(n).subscribe((function(e){if(e){var n=t.flatDepartmentsArray.findIndex((function(t){return t.identity.id===e.identity.id}));if(n>d.c.notFound){var r=Object.assign({},t.flatDepartmentsArray[n]);r=t.convertDepartment(e,r),t.updateLevelOfEducationMap(r),t.flatDepartmentsArray[n]=r,t.extensiveTreeComponent.executeEditItem(r),t.toastr.success("Organisation unit has been updated"),t.cxGlobalLoaderService.hideLoader()}}}),(function(e){t.toastr.error("An error occurred when updating department."),t.cxGlobalLoaderService.hideLoader()})))}},{key:"loadMoreDepartments",value:function(e){var t=this,n=this.flatDepartmentsArray.find((function(e){return e.identity.id===t.selectedDepartmentId})),r=e.find((function(e){return e.identity.id===t.selectedDepartmentId})),a=this.flatDepartmentsArray.indexOf(n);a>d.c.notFound&&(this.flatDepartmentsArray[a]=r),e=e.filter((function(e){return e.identity.id!==t.selectedDepartmentId})),this.flatDepartmentsArray=e?this.flatDepartmentsArray.concat(e):this.flatDepartmentsArray,this.isLoadingDepartment=!1}},{key:"onCloseTagGroup",value:function(e){switch(e.groupConstant){case p.a.DEPARTMENT_TYPE:this.departmentTagData=this.departmentTagData.filter((function(e){return e.groupConstant!==p.a.DEPARTMENT_TYPE})),this.departmentFilterOptions.forEach((function(t){return t.groupConstant!==e.groupConstant?void 0:t.options.forEach((function(e){return e.isSelected=!1}))})),this.departmentQueryObject.departmentTypeIds=[],this.selectedDepartmentId=this.currentDepartmentId,this.flatDepartmentsArray=[],this.getDepartments(this.selectedDepartmentId);break;default:return}}},{key:"onCloseTag",value:function(e,t){switch(t){case p.a.DEPARTMENT_TYPE:this.departmentTagData.forEach((function(n){n.groupConstant===t&&n.options.forEach((function(t){if(t.objectId===e.objectId)return t.isSelected=!1}))})),this.departmentTagData=this.departmentTagData.filter((function(e){return!0===e.options.some((function(e){return e.isSelected}))})),this.departmentFilterOptions.forEach((function(n){n.groupConstant===t&&n.options.forEach((function(t){if(t.objectId===e.objectId)return t.isSelected=!1}))}));var n=this.departmentQueryObject.departmentTypeIds.filter((function(t){return t!==e.objectId}));this.selectedDepartmentId=this.currentDepartmentId,this.flatDepartmentsArray=[],this.departmentQueryObject.departmentTypeIds=[],this.getDepartments(this.selectedDepartmentId),this.departmentQueryObject.departmentTypeIds=n;break;default:return}}},{key:"onClickFilter",value:function(){var e=this,t=this.ngbModal.open(O,{size:"lg",backdrop:"static",centered:!0}),n=t.componentInstance;n.departmentFilterOptions=this.departmentFilterOptions,this.subscription.add(n.done.subscribe((function(n){e.changeOrganisationWithFilterData(n),t.close()}))),this.subscription.add(n.cancel.subscribe((function(){t.close()})))}},{key:"changeOrganisationWithFilterData",value:function(e){var t=this,n=e.find((function(e){return e.name===t.departmentTypeTitle}));this.cxGlobalLoaderService.showLoader(),this.departmentQueryObject.departmentTypeIds=n.options.filter((function(e){return!0===e.isSelected})).map((function(e){return e.objectId})),this.departmentQueryObject.maxChildrenLevel=void 0,this.departmentHierarchicalService.getHierarchy(h.b.getDefaultRootDepartment(this.currentUser),this.departmentQueryObject).subscribe((function(e){t.cxGlobalLoaderService.hideLoader(),t.flatDepartmentsArray=u.uniqBy(t.flatDepartmentsArray.concat(e),"identity.id");var n=e.filter((function(e){return!!e.levels&&e.levels.findIndex((function(e){return t.departmentQueryObject.departmentTypeIds.includes(e.identity.id)}))>-1}));n.forEach((function(n){t.departmentPathMap[n.identity.id]=n.pathName?n.pathName:t.getPathOfDepartment(e,n)})),t.openDialog(n,!1),t.departmentFilterOptions.forEach((function(e){e.options.forEach((function(e){e.isSelected=!1}))}))}),(function(){t.toastr.error("There is something wrong, Please try again."),t.cxGlobalLoaderService.hideLoader()}))}},{key:"onClearAllFilter",value:function(){this.departmentTagData=[],this.departmentFilterOptions.forEach((function(e){e.options.forEach((function(e){e.isSelected=!1}))})),this.initFilterObject(),this.selectedDepartmentId=this.currentDepartmentId,this.flatDepartmentsArray=[],this.getDepartments(h.b.getDefaultRootDepartment(this.currentUser))}},{key:"loadChildren",value:function(e){e&&e.identity&&(this.isLoadingDepartment=!0,this.selectedDepartmentId=e.identity.id,this.getDepartments(this.selectedDepartmentId))}},{key:"onClickItemResult",value:function(e){this.searchDepartmentResult=[],this.departmentQueryObject.departmentTypeIds=[],this.ngbModal.dismissAll(),this.currentDepartmentId=e.identity.id,this.changeDetectorRef.detectChanges(),this.getDepartments(this.currentDepartmentId),this.isDetectExpandTree=!0}},{key:"openDialog",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.ngbModal.hasOpenModals()){var r=this.ngbModal.open(z,{centered:!0,size:"lg",backdrop:"static"}),a=r.componentInstance;a.searchDepartmentResult=e,a.isSearchAction=n,a.dialogHeaderText=this.translateAdapterService.getValueImmediately(n?"Department_Page.Department_Search.Dialog_Header":"Department_Page.Department_Filter.Dialog_Header"),a.departmentPathMap=this.departmentPathMap,a.isNoSearchResult=0===e.length,this.subscription.add(a.cancel.subscribe((function(){r.close()}))),this.subscription.add(a.clickItemResult.subscribe((function(e){r.close(),t.onClickItemResult(e)})))}}},{key:"convertDepartment",value:function(e,t){return t.departmentName=e.name,t.identity=e.identity,t.parentDepartmentId=e.parentDepartmentId,t.organizationNumber=e.organizationNumber,t.address=e.address,t.jsonDynamicAttributes=e.jsonDynamicAttributes,t.levels=e.levels,t}},{key:"buildDepartmentDtoFromSubmittedForm",value:function(e){var t=u.cloneDeep(this.currentSelectedDepartment);return t=Object.assign(Object.assign({},t),{organizationNumber:e.organizationNumber,address:e.address,name:e.name,identity:{extId:e.identity.extId,ownerId:this.currentSelectedDepartment.identity.ownerId,customerId:this.currentSelectedDepartment.identity.customerId,archetype:this.currentSelectedDepartment.identity.archetype,id:this.currentSelectedDepartment.identity.id},jsonDynamicAttributes:{cluster:e.jsonDynamicAttributes&&e.jsonDynamicAttributes.cluster?e.jsonDynamicAttributes.cluster:"",clusterSuperintendent:e.jsonDynamicAttributes&&e.jsonDynamicAttributes.clusterSuperintendent?e.jsonDynamicAttributes.clusterSuperintendent:"",zone:e.jsonDynamicAttributes&&e.jsonDynamicAttributes.zone?e.jsonDynamicAttributes.zone:"",zoneDirector:e.jsonDynamicAttributes&&e.jsonDynamicAttributes.zoneDirector?e.jsonDynamicAttributes.zoneDirector:"",typeOfOrganizationUnits:e.jsonDynamicAttributes&&e.jsonDynamicAttributes.typeOfOrganizationUnits?e.jsonDynamicAttributes.typeOfOrganizationUnits:""},levels:e.levels}),e.jsonDynamicAttributes&&e.jsonDynamicAttributes.showInSignUpForm&&e.jsonDynamicAttributes.showInSignUpForm.length>0&&(t.jsonDynamicAttributes.showInSignUpForm=e.jsonDynamicAttributes.showInSignUpForm[0]),t}},{key:"initFilterOptions",value:function(e){var t=this;this.departmentTypes=e,this.departmentTypeTitle=this.translateAdapterService.getValueImmediately("Department_Page.Filter_Section.Filter_Options.Education_Level"),this.departmentFilterOptions=[new A.a({name:this.departmentTypeTitle,options:this.departmentTypes.map((function(e){return new A.b({value:t.getLocalizedText(e.localizedData),objectId:e.identity.id})})),groupConstant:p.a.DEPARTMENT_TYPE})]}},{key:"initFilterObject",value:function(){this.departmentQueryObject=new A.c({includeParent:!1,includeChildren:!0,maxChildrenLevel:1,countChildren:!0,countUser:!0,includeDepartmentType:!0})}},{key:"getLocalizedText",value:function(e){var t=this,n=e.findIndex((function(e){return e.languageCode===t.currentLanguageCode}));if(n>d.c.notFound)return e[n].fields[0].localizedText}},{key:"initButtonCondition",value:function(){this.buttonCondition=new a.E({enableAdd:function(e){if(e&&e.entityStatus&&!e.entityStatus.externallyMastered&&1===e.parentDepartmentId)return!e.entityStatus.externallyMastered},enableEdit:function(e){return e&&e.identity&&e.identity.archetype&&"Unknown"!==e.identity.archetype},enableMove:function(){return!1},enableRemove:function(e){if(e.entityStatus&&!e.entityStatus.externallyMastered&&0===e.userCount&&0===e.childrenCount)return!e.entityStatus.externallyMastered}})}},{key:"getDepartments",value:function(e){var t=this;this.cxGlobalLoaderService.showLoader();var n=u.clone(this.departmentQueryObject);this.subscription.add(this.departmentHierarchicalService.getHierarchy(e,n).subscribe((function(e){e&&e.map((function(e){return new w.a(e)})),t.isLoadingDepartment?t.loadMoreDepartments(e):t.flatDepartmentsArray=u.uniqBy(t.flatDepartmentsArray.concat(e),"identity.id"),t.flatDepartmentsArray.forEach((function(e){t.updateLevelOfEducationMap(e)})),t.cxGlobalLoaderService.hideLoader(),t.isNoDepartment=!e||0===e.length,t.changeDetectorRef.detectChanges()}),(function(e){t.cxGlobalLoaderService.hideLoader()}),(function(){t.isDetectExpandTree=!1})))}},{key:"updateLevelOfEducationMap",value:function(e){this.levelOfEducationMap[e.identity.id]=e.levels&&e.levels.length>0?this.getPropLocalizedData(e.levels,this.currentLanguageCode):""}},{key:"getPropLocalizedData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Name";return e.map((function(e){return c.a.getPropLocalizedData(e.localizedData,n,t)}))}},{key:"checkEmptyFilter",value:function(){return this.departmentFilterOptions[0].options.filter((function(e){return e.isSelected})).length>0}},{key:"checkDepartmentType",value:function(e){var t=e.organizationalUnitTypes&&e.organizationalUnitTypes.length>0?e.organizationalUnitTypes.map((function(e){return e.identity.extId})):"";return{isSchoolDepartment:t.includes(E.c.School),isZoneDepartment:t.includes(E.c.Branch_Zone),isClusterDepartment:t.includes(E.c.Cluster),isBranchDepartment:t.includes(E.c.Branch_Zone)}}},{key:"getEducationLevels",value:function(){var e=this;this.subscription.add(this.departmentHierarchicalService.getDepartmentTypes("Level").subscribe((function(t){t&&e.initFilterOptions(t)})))}},{key:"getDepartmentTypeList",value:function(){var e=this;this.subscription.add(this.departmentHierarchicalService.getDepartmentTypes("OrganizationalUnitType").subscribe((function(t){t&&(e.departmentTypeList=t)})))}},{key:"getPathOfDepartment",value:function(e,t){var n=e.find((function(e){return e.identity.id===t.parentDepartmentId}));return n?this.getPathOfDepartment(e,n).concat("/"+t.departmentName):t.departmentName}},{key:"getRouteOfDepartment",value:function(e,t,n){var r=e.find((function(e){return e.identity.id===t.parentDepartmentId}));r?(n[r.identity.id]=r.identity.id,this.getRouteOfDepartment(e,r,n)):n[t.identity.id]=t.identity.id}}]),n}(l.d)).\u0275fac=function(e){return new(e||$)(g["\u0275\u0275directiveInject"](g.ChangeDetectorRef),g["\u0275\u0275directiveInject"](y.a),g["\u0275\u0275directiveInject"](R.a),g["\u0275\u0275directiveInject"](a.n),g["\u0275\u0275directiveInject"](P.a),g["\u0275\u0275directiveInject"](a.m),g["\u0275\u0275directiveInject"](M.a),g["\u0275\u0275directiveInject"](U.a),g["\u0275\u0275directiveInject"](i.j),g["\u0275\u0275directiveInject"](D.d))},$.\u0275cmp=g["\u0275\u0275defineComponent"]({type:$,selectors:[["department-hierarchical"]],viewQuery:function(e,t){var n;1&e&&g["\u0275\u0275viewQuery"](a.k,!0),2&e&&g["\u0275\u0275queryRefresh"](n=g["\u0275\u0275loadQuery"]())&&(t.extensiveTreeComponent=n.first)},features:[g["\u0275\u0275ProvidersFeature"]([y.a]),g["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:6,consts:[[1,"department"],[1,"filter-section__filter-button","text-right"],[1,"cx-btn","cx-btn-icon-right",3,"click"],[1,"icon-controls"],[1,"department__tree"],["class","department__filter-section",4,"ngIf"],[3,"buttonCondition","countChildrenFieldRoute","displayFieldRoute","extensiveTreeHeader","flatObjectsArray","havingExtensiveArea","headerExtensiveTemplate","idFieldRoute","itemExtensiveTemplate","nameDepartmentTemplate","parentIdFieldRoute","text","isDetectExpandTree","currentDepartmentId","addItem","editItem","loadChildren","deleteItem",4,"ngIf"],[1,"department__empty"],["class","department__error-message",4,"ngIf"],[1,"department__filter-section"],["class","department__filter-tag",4,"ngIf"],[1,"department__filter-tag"],[3,"backgroundColor","tagGroup","tagGroupField","tagProperty","tagTemplate","clearAll","closeTagGroup"],["tagTemplate",""],["class","filter-tag__filtered-item",4,"ngIf"],[1,"filter-tag__filtered-item"],[1,"filtered-item__item-text"],["aria-hidden","true",1,"filtered-item__item-icon","material-icons","close-icon-global","d-print-none",3,"click"],[3,"buttonCondition","countChildrenFieldRoute","displayFieldRoute","extensiveTreeHeader","flatObjectsArray","havingExtensiveArea","headerExtensiveTemplate","idFieldRoute","itemExtensiveTemplate","nameDepartmentTemplate","parentIdFieldRoute","text","isDetectExpandTree","currentDepartmentId","addItem","editItem","loadChildren","deleteItem"],["nameTemplate",""],["departmentHeaderTemplate",""],["departmentRowTemplate",""],[1,"department__department-name",3,"title","click"],[1,"department__info-item"],[1,"department__header-item"],[1,"department__extensive-item"],[4,"ngIf"],[1,"department__error-message"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"div",0),g["\u0275\u0275elementStart"](1,"div",1),g["\u0275\u0275elementStart"](2,"button",2),g["\u0275\u0275listener"]("click",(function(){return t.onClickFilter()})),g["\u0275\u0275text"](3),g["\u0275\u0275pipe"](4,"translate"),g["\u0275\u0275element"](5,"i",3),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](6,"div",4),g["\u0275\u0275template"](7,G,2,1,"div",5),g["\u0275\u0275template"](8,Z,7,14,"cx-extensive-tree",6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"div",7),g["\u0275\u0275template"](10,K,3,3,"span",8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&(g["\u0275\u0275advance"](3),g["\u0275\u0275textInterpolate1"](" ",g["\u0275\u0275pipeBind1"](4,4,"Common.Label.Filter")," "),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",t.flatDepartmentsArray),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",t.flatDepartmentsArray&&t.flatDepartmentsArray.length),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",t.isNoDepartment))},directives:[v.n,a.D,a.k],pipes:[D.c],styles:["department-hierarchical .department__title{font-size:1.5em}department-hierarchical .department__tree{padding-left:30px;padding-right:30px;padding-bottom:30px}department-hierarchical .department__header-item{border:none!important;white-space:nowrap;font-weight:700;width:100%}department-hierarchical .department__info-item{display:flex}department-hierarchical .department__department-name{cursor:pointer}department-hierarchical .department__check-icon{padding:5px 0;font-size:24px!important}department-hierarchical .department__extensive-item{width:100%}department-hierarchical .department__error-message{font-size:1.5em;color:red}department-hierarchical .department__loading-message{font-size:1.5em}department-hierarchical .department__filter-dropdown{display:flex;justify-content:flex-end}department-hierarchical .department__filter-tag{margin-left:20px}department-hierarchical .department .material-icons{color:#5b6a83!important;font-size:0}department-hierarchical .department .cx-extensive-tree__btn i.material-icons:before{font-size:18px!important;border:2px solid #5b6a83}department-hierarchical .department__empty{text-align:center}department-hierarchical .filter-tag__filtered-item{height:35px;display:inline-block;background:#cfdbe5;margin:5px;border-radius:5px}department-hierarchical .filtered-item__item-text{height:100%;float:left;padding:7px}department-hierarchical .filtered-item__item-icon{cursor:pointer;width:30px;height:30px;margin-top:4px;transform:translateY(3px)}department-hierarchical .filtered-item__item-icon:before{font-size:20px!important}department-hierarchical .filtered-item__item-icon:hover{color:#fff!important}department-hierarchical .filter-section__filter-dropdown{box-shadow:0 4px 10px #9ba7bf;border:none;margin-top:10px}department-hierarchical .filter-section__filter-dropdown .filter-dropdown__filter{width:400px;padding:10px 20px 20px!important;border:none!important}department-hierarchical .filter-section__filter-dropdown .filter-dropdown__filter-header{text-align:center;font-size:12px;font-weight:700}department-hierarchical .filter-section__filter-dropdown .filter-dropdown__filter-items{max-height:40vh;font-size:12px;overflow:auto}department-hierarchical .filter-section__filter-dropdown .filter-dropdown__action-buttons{width:100%;margin-bottom:10px;padding-top:20px;padding-right:20px;text-align:right}department-hierarchical ::ng-deep .cx-tree__act-btn--command{padding:5px 15px 5px 10px}department-hierarchical ::ng-deep .cx-tree__act-btn--command:hover{background-color:#dcdcdc;border-radius:5px}department-hierarchical ::ng-deep .cx-tree .cx-tree-node__current-data--selected,department-hierarchical ::ng-deep .cx-tree .cx-tree-node__current-data:hover{background-color:#dbe2ea}department-hierarchical ::ng-deep .cx-tree .material-icons{color:#5b6a83}department-hierarchical ::ng-deep .cx-tree .material-icons:before{font-size:30px}department-hierarchical ::ng-deep .cx-tree .collapse-icon:before,department-hierarchical ::ng-deep .cx-tree .expand-icon:before{font-size:24px;border-color:#5b6a83}.cx-dialog-template .content-search__result--name{font-weight:700;cursor:pointer}.cx-dialog-template .content-search__result-match{padding-left:20px}.cx-dialog-template .content-search__no-result{padding-left:13px;font-size:17px}.sv_qcbx .checkbox label{float:left}"],encapsulation:2,changeDetection:0}),$),X=((Y=function e(){_classCallCheck(this,e)}).\u0275mod=g["\u0275\u0275defineNgModule"]({type:Y}),Y.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Y)},imports:[[o.a,a.f,i.h,r.f.forChild([{path:"",component:W},{path:"",component:z}])]]}),Y)}}]);